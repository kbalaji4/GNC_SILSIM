# ðŸš€ EKF Interactive Plotter

A modern web-based interactive plotter for visualizing Extended Kalman Filter simulation results with advanced filtering and FSM state visualization.

## âœ¨ Features

- **Interactive Data Selection**: Choose from Position, Velocity, Acceleration in X/Y/Z directions
- **FSM State Filtering**: Filter data by specific flight state machine states
- **Raw Data Overlay**: Compare EKF estimates with raw sensor data
- **FSM State Markers**: Visual markers showing when FSM states change
- **Real-time Statistics**: Live updates of data statistics and flight information
- **Export Functionality**: Export filtered data as CSV
- **Responsive Design**: Works on desktop and mobile devices

## ðŸš€ Quick Start

### Option 1: Python Server (Recommended)
```bash
cd interactive_plotter
python3 server.py
```
The browser will open automatically at `http://localhost:8000`

### Option 2: Manual Server
If you have a web server running, just open `index.html` in your browser.

## ðŸ“Š How to Use

1. **Select Data Type**: Choose what to plot (Position X/Y/Z, Velocity X/Y/Z, Acceleration X/Y/Z, or Altitude)

2. **Filter by FSM State**: 
   - Select "All States" to see the entire flight
   - Choose specific states like "FIRST_BOOST", "COAST", "APOGEE", etc.

3. **Add Raw Data**: Optionally overlay raw sensor data for comparison

4. **Interactive Controls**:
   - **Update Plot**: Refresh the visualization with current settings
   - **Reset View**: Zoom out to see all data
   - **Export Data**: Download filtered data as CSV

## ðŸŽ¯ FSM States Available

- `STATE_IDLE`: Pre-flight idle state
- `STATE_FIRST_BOOST`: First stage boost phase
- `STATE_BURNOUT`: First stage burnout
- `STATE_COAST`: Coasting phase
- `STATE_APOGEE`: Apogee detection
- `STATE_DROGUE_DEPLOY`: Drogue parachute deployment
- `STATE_DROGUE`: Drogue descent
- `STATE_MAIN_DEPLOY`: Main parachute deployment
- `STATE_MAIN`: Main parachute descent
- `STATE_LANDED`: Landing detection
- `STATE_SUSTAINER_IGNITION`: Sustainer motor ignition
- `STATE_SECOND_BOOST`: Second stage boost
- `STATE_FIRST_SEPARATION`: Stage separation

## ðŸ“ File Structure

```
interactive_plotter/
â”œâ”€â”€ index.html          # Main HTML interface
â”œâ”€â”€ plotter.js          # JavaScript plotting logic
â”œâ”€â”€ server.py           # Python HTTP server
â””â”€â”€ README.md           # This file
```

## ðŸ”§ Technical Details

- **Frontend**: HTML5, CSS3, TypeScript (compiled to ES6 JavaScript)
- **Plotting**: Plotly.js for interactive charts
- **Data**: JSON API from Python server, server-sent events for live updates
- **Server**: Python HTTP server with CORS support, SSE, and clean Ctrl-C

## ðŸŽ¨ UI Features

- **Modern Design**: Clean, professional interface with gradient backgrounds
- **Responsive Layout**: Adapts to different screen sizes
- **Real-time Updates**: Statistics update as you change filters
- **Visual Feedback**: Hover effects and smooth transitions
- **Accessibility**: Clear labels and intuitive controls

## ðŸ› Troubleshooting

### Data Not Loading
- Make sure `output/results.csv` exists in the parent directory
- Start the server via `python3 interactive_plotter/server.py`
- The frontend calls `/api/results` and subscribes to `/events`

### Browser Compatibility
- Works best in Chrome, Firefox, Safari, Edge
- Requires JavaScript enabled
- Modern browser with ES6+ support recommended

### Performance
- Large datasets (>100k points) may load slowly
- Consider filtering by FSM state for better performance
- Browser memory usage scales with data size

## ðŸš€ Integration with EKF Simulation

This plotter automatically reads from `output/results.csv` generated by your EKF simulation. To use:

1. Run your EKF simulation: `./run_simulation.sh`
2. Start the interactive plotter: `python3 interactive_plotter/server.py`
3. Open the browser interface and explore your data!

## ðŸ“ˆ Example Use Cases

- **Flight Analysis**: Filter by specific phases to analyze performance
- **Sensor Validation**: Compare EKF estimates with raw sensor data
- **Debugging**: Identify issues by examining specific FSM states
- **Presentation**: Create clean visualizations for reports
- **Research**: Export filtered data for further analysis
